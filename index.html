<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Osobisty Dziennik</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .tabs {
            display: flex;
            flex-wrap: wrap;
            border-bottom: 2px solid #ecf0f1;
            background: #f8f9fa;
        }
        .tab {
            padding: 15px 10px;
            cursor: pointer;
            background: transparent;
            border: none;
            font-weight: bold;
            transition: background 0.3s;
            flex: 1;
            min-width: 80px;
            text-align: center;
            font-size: 14px;
        }
        
        /* Mobile styles for tabs */
        @media (max-width: 600px) {
            .tab {
                padding: 12px 5px;
                font-size: 12px;
                min-width: 50px;
            }
            body {
                margin: 10px;
            }
        }
        
        /* For very small screens */
        @media (max-width: 380px) {
            .tabs {
                flex-wrap: wrap;
            }
            .tab {
                flex-basis: 33.33%;
                border-bottom: 1px solid #ecf0f1;
            }
        }
        
        .tab.active {
            background: #3498db;
            color: white;
        }
        .tab:hover {
            background: #34495e;
            color: white;
        }
        .content {
            padding: 30px;
            min-height: 400px;
        }
        .tab-section {
            display: none;
        }
        .tab-section.active {
            display: block;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }
        input[type="text"], input[type="date"], textarea, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        textarea {
            height: 60px;
            resize: vertical;
        }
        .btn {
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        .btn:hover {
            background: #2980b9;
        }
        .btn-danger {
            background: #e74c3c;
        }
        .btn-danger:hover {
            background: #c0392b;
        }
        .info-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #2196f3;
            margin-bottom: 20px;
        }
        .warning-box {
            background: #fff3e0;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ff9800;
            margin-bottom: 20px;
        }
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            border: 1px solid #ddd;
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
        }
        .stat-label {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        .backup-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .backup-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
            text-align: center;
        }
        .backup-card h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }
        .file-input {
            display: none;
        }
        .file-input-label {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        .file-input-label:hover {
            background: #2980b9;
        }
        .success-box {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #4caf50;
            margin: 15px 0;
            display: none;
        }
        .error-box {
            background: #ffebee;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #f44336;
            margin: 15px 0;
            display: none;
        }
        .question {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        .question-options {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .question-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .result {
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
        }
        .result-sin {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #f44336;
        }
        .result-no-sin {
            background: #e8f5e8;
            color: #2e7d32;
            border: 2px solid #4caf50;
        }
        .result-uncertain {
            background: #fff3e0;
            color: #ef6c00;
            border: 2px solid #ff9800;
        }
        .guide-section {
            background: #f8f9fa;
            margin-bottom: 15px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #ddd;
        }
        .guide-header {
            background: #3498db;
            color: white;
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
        }
        .guide-header:hover {
            background: #2980b9;
        }
        .guide-content {
            padding: 15px;
            display: none;
        }
        .guide-content.active {
            display: block;
        }
        .sin-type {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .sin-category {
            padding: 12px;
            border-radius: 5px;
            border-left: 4px solid;
        }
        .sin-heavy {
            background: #ffebee;
            border-left-color: #f44336;
        }
        .sin-light {
            background: #fff3e0;
            border-left-color: #ff9800;
        }
        .sin-category h5 {
            margin: 0 0 8px 0;
            color: #2c3e50;
            font-size: 14px;
        }
        .sin-category ul {
            margin: 0;
            padding-left: 18px;
            font-size: 13px;
        }
        .sin-category li {
            margin-bottom: 4px;
        }
        
        /* Nowe style dla listy grzech√≥w */
        .sin-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background: #f8f9fa;
        }
        .sin-item.serious {
            border-left: 4px solid #f44336;
            background: #ffebee;
        }
        .sin-item.venial {
            border-left: 4px solid #ff9800;
            background: #fff3e0;
        }
        .sin-item.confessed {
            opacity: 0.6;
            background: #e8f5e8;
            border-left-color: #4caf50;
        }
        .sin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .sin-severity {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .severity-serious {
            background: #f44336;
            color: white;
        }
        .severity-venial {
            background: #ff9800;
            color: white;
        }
        .sin-description {
            margin-bottom: 10px;
            font-weight: bold;
        }
        .sin-details {
            font-size: 13px;
            color: #666;
        }
        .sin-actions {
            margin-top: 10px;
            display: flex;
            gap: 10px;
        }
        .btn-small {
            padding: 5px 10px;
            font-size: 12px;
        }
        .confession-list {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin-top: 20px;
        }
        .confession-item {
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }
        .commandment-names {
            "1": "1. Przykazanie",
            "2": "2. Przykazanie", 
            "3": "3. Przykazanie",
            "4": "4. Przykazanie",
            "5": "5. Przykazanie",
            "6": "6. Przykazanie",
            "7": "7. Przykazanie",
            "8": "8. Przykazanie",
            "9": "9. Przykazanie",
            "10": "10. Przykazanie"
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- TABS NAVIGATION -->
        <div class="tabs">
            <button class="tab active" onclick="showTab('weryfikacja')">üîç Sprawd≈∫</button>
            <button class="tab" onclick="showTab('dodaj')">‚ûï Dodaj</button>
            <button class="tab" onclick="showTab('lista')">üìã Lista</button>
            <button class="tab" onclick="showTab('przewodnik')">üìñ Przewodnik</button>
            <button class="tab" onclick="showTab('statystyki')">üìä Statystyki</button>
            <button class="tab" onclick="showTab('spowiedz')">üôè Spowied≈∫</button>
            <button class="tab" onclick="showTab('backup')">üíæ Backup</button>
        </div>

        <!-- CONTENT AREA -->
        <div class="content">
            <!-- WERYFIKACJA -->
            <div id="weryfikacja" class="tab-section active">
                <h3>üîç Czy to by≈Ç grzech?</h3>
                <p>Odpowiedz na pytania:</p>
                
                <div class="question">
                    <div class="question-title">1. Czy dzia≈Ça≈Çe≈õ ≈õwiadomie?</div>
                    <div class="question-options">
                        <label class="question-option">
                            <input type="radio" name="consciousness" value="yes"> Tak
                        </label>
                        <label class="question-option">
                            <input type="radio" name="consciousness" value="no"> Nie (sen, choroba)
                        </label>
                        <label class="question-option">
                            <input type="radio" name="consciousness" value="partial"> Czƒô≈õciowo
                        </label>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-title">2. Czy mog≈Çe≈õ postƒÖpiƒá inaczej?</div>
                    <div class="question-options">
                        <label class="question-option">
                            <input type="radio" name="freedom" value="yes"> Tak
                        </label>
                        <label class="question-option">
                            <input type="radio" name="freedom" value="no"> Nie (przymus)
                        </label>
                        <label class="question-option">
                            <input type="radio" name="freedom" value="limited"> Ograniczona wolno≈õƒá
                        </label>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-title">3. Czy wiedzia≈Çe≈õ ≈ºe to z≈Çe?</div>
                    <div class="question-options">
                        <label class="question-option">
                            <input type="radio" name="knowledge" value="yes"> Tak
                        </label>
                        <label class="question-option">
                            <input type="radio" name="knowledge" value="no"> Nie
                        </label>
                        <label class="question-option">
                            <input type="radio" name="knowledge" value="uncertain"> Mia≈Çem wƒÖtpliwo≈õci
                        </label>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-title">4. Czy zgodzi≈Çe≈õ siƒô na to?</div>
                    <div class="question-options">
                        <label class="question-option">
                            <input type="radio" name="consent" value="yes"> Tak
                        </label>
                        <label class="question-option">
                            <input type="radio" name="consent" value="no"> Nie, by≈Ço mimowolne
                        </label>
                        <label class="question-option">
                            <input type="radio" name="consent" value="partial"> Waha≈Çem siƒô
                        </label>
                    </div>
                </div>
                
                <button class="btn" onclick="verifyAction()">üîç Sprawd≈∫</button>
                
                <div id="verification-result"></div>
            </div>

            <!-- DODAJ -->
            <div id="dodaj" class="tab-section">
                <h3>üìù Dodaj grzech</h3>
                <form id="sin-form">
                    <div class="form-group">
                        <label for="sin-description">Opis:</label>
                        <textarea id="sin-description" placeholder="Co zrobi≈Çe≈õ, powiedzia≈Çe≈õ lub pomy≈õla≈Çe≈õ..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="sin-date">Data:</label>
                        <input type="date" id="sin-date" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="sin-severity">Ciƒô≈ºko≈õƒá:</label>
                        <select id="sin-severity" required>
                            <option value="">-- Wybierz --</option>
                            <option value="ciƒô≈ºki">üî¥ Grzech ciƒô≈ºki (obowiƒÖzek spowiedzi)</option>
                            <option value="powszedni">üü° Grzech powszedni (zalecana spowied≈∫)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sin-commandment">Przykazanie:</label>
                        <select id="sin-commandment" required>
                            <option value="">-- Wybierz --</option>
                            <option value="1">1. Nie bƒôdziesz mia≈Ç bog√≥w cudzych przede MnƒÖ</option>
                            <option value="2">2. Nie bƒôdziesz bra≈Ç imienia Pana, Boga swego, nadaremnie</option>
                            <option value="3">3. Pamiƒôtaj, aby≈õ dzie≈Ñ ≈õwiƒôty ≈õwiƒôci≈Ç</option>
                            <option value="4">4. Czcij ojca swego i matkƒô swojƒÖ</option>
                            <option value="5">5. Nie zabijaj</option>
                            <option value="6">6. Nie cudzo≈Ç√≥≈º</option>
                            <option value="7">7. Nie kradnij</option>
                            <option value="8">8. Nie m√≥w fa≈Çszywego ≈õwiadectwa przeciw bli≈∫niemu swemu</option>
                            <option value="9">9. Nie po≈ºƒÖdaj ≈ºony bli≈∫niego swego</option>
                            <option value="10">10. Ani ≈ºadnej rzeczy, kt√≥ra jego jest</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sin-cardinal">Grzech g≈Ç√≥wny:</label>
                        <select id="sin-cardinal">
                            <option value="">-- Opcjonalnie --</option>
                            <option value="pycha">Pycha</option>
                            <option value="chciwo≈õƒá">Chciwo≈õƒá</option>
                            <option value="nieczysto≈õƒá">Nieczysto≈õƒá</option>
                            <option value="zazdro≈õƒá">Zazdro≈õƒá</option>
                            <option value="ob≈ºarstwo">Ob≈ºarstwo</option>
                            <option value="gniew">Gniew</option>
                            <option value="lenistwo">Lenistwo</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sin-context">Okoliczno≈õci:</label>
                        <textarea id="sin-context" placeholder="Dlaczego, gdzie, skutki..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn">üíæ Zapisz</button>
                </form>
            </div>

            <!-- LISTA -->
            <div id="lista" class="tab-section">
                <h3>üìã Lista grzech√≥w</h3>
                <div class="form-group">
                    <label for="filter-period">Filtruj okres:</label>
                    <select id="filter-period" onchange="updateSinsList()">
                        <option value="all">Wszystkie</option>
                        <option value="7">Ostatnie 7 dni</option>
                        <option value="30">Ostatnie 30 dni</option>
                        <option value="90">Ostatnie 3 miesiƒÖce</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="filter-confessed">Filtruj status:</label>
                    <select id="filter-confessed" onchange="updateSinsList()">
                        <option value="all">Wszystkie</option>
                        <option value="unconfessed">Niewyspowiadane</option>
                        <option value="confessed">Wyspowiadane</option>
                    </select>
                </div>
                <div id="sins-list"></div>
            </div>

            <!-- PRZEWODNIK -->
            <div id="przewodnik" class="tab-section">
                <h3>üìñ Przewodnik po grzechach</h3>
                <p>Kliknij na sekcje aby zobaczyƒá przyk≈Çady grzech√≥w ciƒô≈ºkich i powszednich:</p>
                
                <!-- 10 PRZYKAZA≈É -->
                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('przykazanie1')">
                        <span>1Ô∏è‚É£ Nie bƒôdziesz mia≈Ç bog√≥w cudzych przede MnƒÖ</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="przykazanie1" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Grzechy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Ba≈Çwochwalstwo</li>
                                    <li>Magia, wr√≥≈ºbiarstwo</li>
                                    <li>Porzucenie wiary</li>
                                    <li>Blu≈∫nierstwo przeciw Bogu</li>
                                    <li>Stawianie czego≈õ ponad Boga</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Grzechy powszednie</h5>
                                <ul>
                                    <li>PrzesƒÖdy</li>
                                    <li>Lekcewa≈ºenie ≈õwiƒôto≈õci</li>
                                    <li>PrzywiƒÖzanie do d√≥br</li>
                                    <li>Stawianie hobby ponad modlitwƒô</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('przykazanie2')">
                        <span>2Ô∏è‚É£ Nie bƒôdziesz bra≈Ç imienia Pana, Boga swego, nadaremnie</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="przykazanie2" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Grzechy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Blu≈∫nierstwo</li>
                                    <li>Krzywoprzysiƒôstwo</li>
                                    <li>≈Åamanie ≈õlub√≥w zakonnych</li>
                                    <li>Przeklinanie z nienawi≈õciƒÖ</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Grzechy powszednie</h5>
                                <ul>
                                    <li>Przeklinanie z przyzwyczajenia</li>
                                    <li>Lekkomy≈õlne u≈ºywanie imienia Boga</li>
                                    <li>Nieprzemy≈õlane obietnice Bogu</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('przykazanie3')">
                        <span>3Ô∏è‚É£ Pamiƒôtaj, aby≈õ dzie≈Ñ ≈õwiƒôty ≈õwiƒôci≈Ç</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="przykazanie3" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Grzechy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Opuszczenie Mszy w niedzielƒô</li>
                                    <li>Praca zarobkowa w niedzielƒô</li>
                                    <li>Zmuszanie innych do pracy</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Grzechy powszednie</h5>
                                <ul>
                                    <li>Sp√≥≈∫nienie na Mszƒô</li>
                                    <li>Rozproszenie podczas nabo≈ºe≈Ñstwa</li>
                                    <li>Drobne prace domowe</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('przykazanie4')">
                        <span>4Ô∏è‚É£ Czcij ojca swego i matkƒô swojƒÖ</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="przykazanie4" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Grzechy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Krzywdzenie rodzic√≥w</li>
                                    <li>Porzucenie w potrzebie</li>
                                    <li>Powa≈ºne przekle≈Ñstwa</li>
                                    <li>Ca≈Çkowite zerwanie kontaktu</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Grzechy powszednie</h5>
                                <ul>
                                    <li>Niepos≈Çusze≈Ñstwo</li>
                                    <li>Brak szacunku</li>
                                    <li>Rzadki kontakt</li>
                                    <li>Niecierpliwo≈õƒá</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('przykazanie5')">
                        <span>5Ô∏è‚É£ Nie zabijaj</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="przykazanie5" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Grzechy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Zab√≥jstwo</li>
                                    <li>Samob√≥jstwo</li>
                                    <li>Aborcja</li>
                                    <li>Powa≈ºne pobicia</li>
                                    <li>Jazda pod wp≈Çywem</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Grzechy powszednie</h5>
                                <ul>
                                    <li>Gniew i z≈Ço≈õƒá</li>
                                    <li>Nienawi≈õƒá</li>
                                    <li>≈ªyczenie ≈∫le</li>
                                    <li>Zaniedbanie zdrowia</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('przykazanie6')">
                        <span>6Ô∏è‚É£ Nie cudzo≈Ç√≥≈º</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="przykazanie6" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Grzechy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Czyny nieczyste</li>
                                    <li>Pornografia</li>
                                    <li>Seks przed ≈õlubem</li>
                                    <li>Cudzo≈Ç√≥stwo</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Grzechy powszednie</h5>
                                <ul>
                                    <li>Nieczyste my≈õli (odrzucone)</li>
                                    <li>Nieprzyzwoite ≈ºarty</li>
                                    <li>Prowokacyjny str√≥j</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('przykazanie7')">
                        <span>7Ô∏è‚É£ Nie kradnij</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="przykazanie7" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Grzechy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Kradzie≈º wiƒôkszej warto≈õci</li>
                                    <li>Oszustwa finansowe</li>
                                    <li>Lichwa</li>
                                    <li>Niep≈Çacenie podatk√≥w</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Grzechy powszednie</h5>
                                <ul>
                                    <li>Drobne kradzie≈ºe</li>
                                    <li>Marnotrawstwo</li>
                                    <li>Niewracanie po≈ºyczek</li>
                                    <li>Drobne oszustwa</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('przykazanie8')">
                        <span>8Ô∏è‚É£ Nie m√≥w fa≈Çszywego ≈õwiadectwa przeciw bli≈∫niemu swemu</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="przykazanie8" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Grzechy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Fa≈Çszywe ≈õwiadectwo w sƒÖdzie</li>
                                    <li>Powa≈ºne oszczerstwa</li>
                                    <li>K≈Çamstwa szkodzƒÖce</li>
                                    <li>Ujawnienie tajemnicy spowiedzi</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Grzechy powszednie</h5>
                                <ul>
                                    <li>Drobne k≈Çamstwa</li>
                                    <li>Plotkowanie</li>
                                    <li>Ujawnianie sekret√≥w</li>
                                    <li>Przesadzanie</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('przykazanie9')">
                        <span>9Ô∏è‚É£ Nie po≈ºƒÖdaj ≈ºony bli≈∫niego swego</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="przykazanie9" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Grzechy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>≈öwiadome po≈ºƒÖdanie nieczyste</li>
                                    <li>Planowanie cudzo≈Ç√≥stwa</li>
                                    <li>Fantazjowanie o osobach</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Grzechy powszednie</h5>
                                <ul>
                                    <li>Nieczyste my≈õli (odrzucone)</li>
                                    <li>Mimowolne po≈ºƒÖdanie</li>
                                    <li>Nieczyste marzenia</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('przykazanie10')">
                        <span>üîü Ani ≈ºadnej rzeczy, kt√≥ra jego jest</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="przykazanie10" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Grzechy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Silna zawi≈õƒá szkodzƒÖca</li>
                                    <li>Planowanie kradzie≈ºy z zazdro≈õci</li>
                                    <li>Rado≈õƒá z cudzego nieszczƒô≈õcia</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Grzechy powszednie</h5>
                                <ul>
                                    <li>Zazdro≈õƒá o cudze dobra</li>
                                    <li>Niezadowolenie z losu</li>
                                    <li>Por√≥wnywanie siƒô</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 7 GRZECH√ìW G≈Å√ìWNYCH -->
                <h3 style="margin-top: 30px;">‚ò†Ô∏è Siedem Grzech√≥w G≈Ç√≥wnych</h3>
                
                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('pycha')">
                        <span>üëë Pycha</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="pycha" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Formy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Pogarda dla Boga</li>
                                    <li>Arogancja wobec innych</li>
                                    <li>Brak pokory</li>
                                    <li>Przekonanie o nieomylno≈õci</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Formy lekkie</h5>
                                <ul>
                                    <li>Przechwa≈Çki</li>
                                    <li>Pr√≥≈ºno≈õƒá</li>
                                    <li>Lekcewa≈ºenie rad</li>
                                    <li>Nadmierna dba≈Ço≈õƒá o wyglƒÖd</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('chciwosc')">
                        <span>üí∞ Chciwo≈õƒá</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="chciwosc" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Formy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Skrajne skƒÖpstwo</li>
                                    <li>Lichwa i wyzysk</li>
                                    <li>Kradzie≈º z chciwo≈õci</li>
                                    <li>PieniƒÖdze ponad Boga</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Formy lekkie</h5>
                                <ul>
                                    <li>PrzywiƒÖzanie do d√≥br</li>
                                    <li>Niechƒôƒá do dzielenia</li>
                                    <li>Zazdro≈õƒá o pieniƒÖdze</li>
                                    <li>Niepotrzebne oszczƒôdzanie</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('nieczystosc')">
                        <span>üíã Nieczysto≈õƒá</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="nieczystosc" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Formy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Wszystkie czyny nieczyste</li>
                                    <li>Pornografia</li>
                                    <li>Stosunki przed ≈õlubem</li>
                                    <li>Cudzo≈Ç√≥stwo</li>
                                    <li>≈öwiadome po≈ºƒÖdanie</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Formy lekkie</h5>
                                <ul>
                                    <li>Nieczyste my≈õli (odrzucone)</li>
                                    <li>Nieczyste ≈ºarty</li>
                                    <li>Niepotrzebne patrzenie</li>
                                    <li>Prowokacyjny str√≥j</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('zazdrosc')">
                        <span>üëÅÔ∏è Zazdro≈õƒá</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="zazdrosc" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Formy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Nienawi≈õƒá z zazdro≈õci</li>
                                    <li>Rado≈õƒá z cudzego nieszczƒô≈õcia</li>
                                    <li>Szkodzenie z zawi≈õci</li>
                                    <li>Plotki z zazdro≈õci</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Formy lekkie</h5>
                                <ul>
                                    <li>Smutek z cudzego sukcesu</li>
                                    <li>Por√≥wnywanie siƒô</li>
                                    <li>Niezadowolenie z losu</li>
                                    <li>Zazdro≈õƒá o talenty</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('obzarstwo')">
                        <span>üçΩÔ∏è Ob≈ºarstwo</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="obzarstwo" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Formy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Alkoholizm</li>
                                    <li>Upijanie do nieprzytomno≈õci</li>
                                    <li>Objadanie do wymiot√≥w</li>
                                    <li>Zaniedbanie rodziny przez na≈Çogi</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Formy lekkie</h5>
                                <ul>
                                    <li>Przejadanie siƒô</li>
                                    <li>Nadmierne picie</li>
                                    <li>≈Åakomstwo</li>
                                    <li>Brak umiarkowania</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('gniew')">
                        <span>üò° Gniew</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="gniew" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Formy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Z≈Ço≈õƒá prowadzƒÖca do przemocy</li>
                                    <li>Planowanie zemsty</li>
                                    <li>Nienawi≈õƒá do osoby</li>
                                    <li>Niszczenie w gniewie</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Formy lekkie</h5>
                                <ul>
                                    <li>Chwilowy gniew</li>
                                    <li>Irytacja</li>
                                    <li>Niecierpliwo≈õƒá</li>
                                    <li>Grubia≈Ñsttwo</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="guide-section">
                    <div class="guide-header" onclick="toggleGuideSection('lenistwo')">
                        <span>üò¥ Lenistwo</span>
                        <span>‚ñº</span>
                    </div>
                    <div id="lenistwo" class="guide-content">
                        <div class="sin-type">
                            <div class="sin-category sin-heavy">
                                <h5>üî¥ Formy ciƒô≈ºkie</h5>
                                <ul>
                                    <li>Zaniedbanie ≈ºycia duchowego</li>
                                    <li>Lenistwo szkodzƒÖce rodzinie</li>
                                    <li>Odmowa pracy bez powodu</li>
                                    <li>Zobojƒôtnienie na zbawienie</li>
                                </ul>
                            </div>
                            <div class="sin-category sin-light">
                                <h5>üü° Formy lekkie</h5>
                                <ul>
                                    <li>Lenistwo w modlitwie</li>
                                    <li>Odk≈Çadanie obowiƒÖzk√≥w</li>
                                    <li>Brak zaanga≈ºowania</li>
                                    <li>Pr√≥≈ºnowanie w pracy</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- STATYSTYKI -->
            <div id="statystyki" class="tab-section">
                <h3>üìä Statystyki</h3>
                <div class="stat-grid" id="stats-grid"></div>
            </div>

            <!-- SPOWIED≈π -->
            <div id="spowiedz" class="tab-section">
                <h3>üôè Przygotowanie do spowiedzi</h3>
                <div class="form-group">
                    <label for="confession-period">Okres:</label>
                    <select id="confession-period">
                        <option value="7">Ostatnie 7 dni</option>
                        <option value="30">Ostatnie 30 dni</option>
                        <option value="90">Ostatnie 3 miesiƒÖce</option>
                        <option value="all">Wszystkie niewyspowiadane</option>
                    </select>
                </div>
                <button class="btn" onclick="generateConfession()">üìã Wygeneruj listƒô</button>
                <button class="btn" onclick="markAsConfessed()">‚úÖ Oznacz jako wyspowiadane</button>
                <div id="confession-list"></div>
            </div>

            <!-- BACKUP -->
            <div id="backup" class="tab-section">
                <h3>üíæ Backup danych</h3>
                
                <div class="info-box">
                    <h4>üìã Informacje</h4>
                    <p id="data-info">≈Åadowanie...</p>
                </div>
                
                <div class="warning-box">
                    <h4>‚ö†Ô∏è Bezpiecze≈Ñstwo</h4>
                    <ul>
                        <li>Pliki zawierajƒÖ wra≈ºliwe dane</li>
                        <li>Nie udostƒôpniaj nikomu</li>
                        <li>Zapisuj w bezpiecznym miejscu</li>
                    </ul>
                </div>
                
                <div class="backup-actions">
                    <div class="backup-card">
                        <h4>üì§ Eksport</h4>
                        <p>Zapisz wszystkie dane do pliku</p>
                        <button class="btn" onclick="exportData()">üíæ Pobierz backup</button>
                    </div>
                    
                    <div class="backup-card">
                        <h4>üì• Import</h4>
                        <p>Przywr√≥ƒá dane z pliku backup</p>
                        <label for="import-file" class="file-input-label">üìÅ Wybierz plik</label>
                        <input type="file" id="import-file" class="file-input" accept=".json,.txt" onchange="importData(event)">
                    </div>
                    
                    <div class="backup-card">
                        <h4>üôè Lista spowiedzi</h4>
                        <p>Pobierz listƒô do spowiedzi</p>
                        <button class="btn" onclick="exportForConfession()">üìÑ Pobierz listƒô</button>
                    </div>
                    
                    <div class="backup-card">
                        <h4>üóëÔ∏è Wyczy≈õƒá</h4>
                        <p>Usu≈Ñ wszystkie dane</p>
                        <button class="btn btn-danger" onclick="clearConfirmation()">üóëÔ∏è Usu≈Ñ wszystko</button>
                    </div>
                </div>
                
                <div id="backup-success" class="success-box">
                    <strong>‚úÖ Sukces!</strong> <span id="success-message"></span>
                </div>
                
                <div id="backup-error" class="error-box">
                    <strong>‚ùå B≈ÇƒÖd!</strong> <span id="error-message"></span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let sins = JSON.parse(localStorage.getItem('sins')) || [];

        // S≈Çownik nazw przykaza≈Ñ
        const commandmentNames = {
            "1": "1. Nie bƒôdziesz mia≈Ç bog√≥w cudzych przede MnƒÖ",
            "2": "2. Nie bƒôdziesz bra≈Ç imienia Pana, Boga swego, nadaremnie", 
            "3": "3. Pamiƒôtaj, aby≈õ dzie≈Ñ ≈õwiƒôty ≈õwiƒôci≈Ç",
            "4": "4. Czcij ojca swego i matkƒô swojƒÖ",
            "5": "5. Nie zabijaj",
            "6": "6. Nie cudzo≈Ç√≥≈º",
            "7": "7. Nie kradnij",
            "8": "8. Nie m√≥w fa≈Çszywego ≈õwiadectwa przeciw bli≈∫niemu swemu",
            "9": "9. Nie po≈ºƒÖdaj ≈ºony bli≈∫niego swego",
            "10": "10. Ani ≈ºadnej rzeczy, kt√≥ra jego jest"
        };

        // Inicjalizacja
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('sin-date').valueAsDate = new Date();
            updateDisplay();
            updateDataInfo();
        });

        // Prze≈ÇƒÖczanie zak≈Çadek
        function showTab(tabName) {
            // Ukryj wszystkie sekcje
            document.querySelectorAll('.tab-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Usu≈Ñ aktywny stan z przycisk√≥w
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Poka≈º wybranƒÖ sekcjƒô
            document.getElementById(tabName).classList.add('active');
            
            // Aktywuj przycisk
            event.target.classList.add('active');
            
            // Aktualizuj dane dla specjalnych zak≈Çadek
            if (tabName === 'statystyki') {
                updateStatistics();
            } else if (tabName === 'backup') {
                updateDataInfo();
            } else if (tabName === 'lista') {
                updateSinsList();
            }
        }

        // Formularz grzech√≥w
        document.getElementById('sin-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const sin = {
                id: Date.now(),
                description: document.getElementById('sin-description').value,
                date: document.getElementById('sin-date').value,
                severity: document.getElementById('sin-severity').value,
                commandment: document.getElementById('sin-commandment').value,
                cardinal: document.getElementById('sin-cardinal').value,
                context: document.getElementById('sin-context').value,
                confessed: false,
                createdAt: new Date().toISOString()
            };
            
            sins.push(sin);
            localStorage.setItem('sins', JSON.stringify(sins));
            
            document.getElementById('sin-form').reset();
            document.getElementById('sin-date').valueAsDate = new Date();
            
            updateDisplay();
            alert('Grzech zapisany!');
        });

        // Weryfikacja grzechu
        function verifyAction() {
            const consciousness = document.querySelector('input[name="consciousness"]:checked')?.value;
            const freedom = document.querySelector('input[name="freedom"]:checked')?.value;
            const knowledge = document.querySelector('input[name="knowledge"]:checked')?.value;
            const consent = document.querySelector('input[name="consent"]:checked')?.value;
            
            const resultContainer = document.getElementById('verification-result');
            
            if (!consciousness || !freedom || !knowledge || !consent) {
                resultContainer.innerHTML = '<div class="result result-uncertain">Odpowiedz na wszystkie pytania</div>';
                return;
            }
            
            if (consciousness === 'no' || freedom === 'no' || knowledge === 'no' || consent === 'no') {
                resultContainer.innerHTML = `
                    <div class="result result-no-sin">
                        ‚úÖ TO NIE BY≈Å GRZECH<br>
                        Brak jednego z wymaganych element√≥w.
                    </div>`;
            } else if (consciousness === 'partial' || freedom === 'limited' || knowledge === 'uncertain' || consent === 'partial') {
                resultContainer.innerHTML = `
                    <div class="result result-uncertain">
                        ‚ö†Ô∏è MO≈ªLIWY GRZECH POWSZEDNI<br>
                        Ograniczona ≈õwiadomo≈õƒá lub zgoda.
                    </div>`;
            } else {
                resultContainer.innerHTML = `
                    <div class="result result-sin">
                        ‚ùå TO BY≈Å GRZECH<br>
                        Przejd≈∫ do zak≈Çadki "Dodaj".
                    </div>`;
            }
        }

        // Aktualizacja listy grzech√≥w
        function updateSinsList() {
            const container = document.getElementById('sins-list');
            const periodFilter = document.getElementById('filter-period').value;
            const confessedFilter = document.getElementById('filter-confessed').value;
            
            let filteredSins = [...sins];
            
            // Filtruj po okresie
            if (periodFilter !== 'all') {
                const days = parseInt(periodFilter);
                const cutoffDate = new Date();
                cutoffDate.setDate(cutoffDate.getDate() - days);
                
                filteredSins = filteredSins.filter(sin => {
                    const sinDate = new Date(sin.date);
                    return sinDate >= cutoffDate;
                });
            }
            
            // Filtruj po statusie spowiedzi
            if (confessedFilter === 'confessed') {
                filteredSins = filteredSins.filter(sin => sin.confessed);
            } else if (confessedFilter === 'unconfessed') {
                filteredSins = filteredSins.filter(sin => !sin.confessed);
            }
            
            // Sortuj po dacie (najnowsze pierwsze)
            filteredSins.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (filteredSins.length === 0) {
                container.innerHTML = '<p>Brak grzech√≥w do wy≈õwietlenia.</p>';
                return;
            }
            
            let html = '';
            filteredSins.forEach(sin => {
                const sinClass = sin.severity === 'ciƒô≈ºki' ? 'serious' : 'venial';
                const confessedClass = sin.confessed ? 'confessed' : '';
                const severityClass = sin.severity === 'ciƒô≈ºki' ? 'severity-serious' : 'severity-venial';
                const commandmentName = commandmentNames[sin.commandment] || `${sin.commandment}. Przykazanie`;
                
                html += `
                    <div class="sin-item ${sinClass} ${confessedClass}">
                        <div class="sin-header">
                            <span class="sin-severity ${severityClass}">
                                ${sin.severity === 'ciƒô≈ºki' ? 'üî¥ Ciƒô≈ºki' : 'üü° Powszedni'}
                            </span>
                            <span>${formatDate(sin.date)}</span>
                        </div>
                        <div class="sin-description">${sin.description}</div>
                        <div class="sin-details">
                            <strong>Przykazanie:</strong> ${commandmentName}<br>
                            ${sin.cardinal ? `<strong>Grzech g≈Ç√≥wny:</strong> ${sin.cardinal}<br>` : ''}
                            ${sin.context ? `<strong>Okoliczno≈õci:</strong> ${sin.context}<br>` : ''}
                            <strong>Status:</strong> ${sin.confessed ? '‚úÖ Wyspowiadany' : '‚ùå Niewyspowiadany'}
                        </div>
                        <div class="sin-actions">
                            ${!sin.confessed ? 
                                `<button class="btn btn-small" onclick="toggleConfessed(${sin.id})">‚úÖ Oznacz jako wyspowiadane</button>` :
                                `<button class="btn btn-small" onclick="toggleConfessed(${sin.id})">‚Ü©Ô∏è Cofnij spowied≈∫</button>`
                            }
                            <button class="btn btn-small btn-danger" onclick="deleteSin(${sin.id})">üóëÔ∏è Usu≈Ñ</button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Formatowanie daty
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pl-PL');
        }

        // Oznaczanie jako wyspowiadany
        function toggleConfessed(sinId) {
            const sinIndex = sins.findIndex(sin => sin.id === sinId);
            if (sinIndex !== -1) {
                sins[sinIndex].confessed = !sins[sinIndex].confessed;
                localStorage.setItem('sins', JSON.stringify(sins));
                updateDisplay();
            }
        }

        // Usuwanie grzechu
        function deleteSin(sinId) {
            if (confirm('Czy na pewno chcesz usunƒÖƒá ten grzech?')) {
                sins = sins.filter(sin => sin.id !== sinId);
                localStorage.setItem('sins', JSON.stringify(sins));
                updateDisplay();
            }
        }

        // Przewodnik - rozwijanie sekcji
        function toggleGuideSection(sectionId) {
            const content = document.getElementById(sectionId);
            const header = content.previousElementSibling;
            const arrow = header.querySelector('span:last-child');
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                arrow.textContent = '‚ñº';
            } else {
                // Zamknij wszystkie inne sekcje
                document.querySelectorAll('.guide-content').forEach(section => {
                    section.classList.remove('active');
                });
                document.querySelectorAll('.guide-header span:last-child').forEach(arrow => {
                    arrow.textContent = '‚ñº';
                });
                
                // Otw√≥rz wybranƒÖ sekcjƒô
                content.classList.add('active');
                arrow.textContent = '‚ñ≤';
            }
        }

        // Statystyki
        function updateStatistics() {
            const container = document.getElementById('stats-grid');
            const totalSins = sins.length;
            const seriousSins = sins.filter(sin => sin.severity === 'ciƒô≈ºki').length;
            const venialSins = sins.filter(sin => sin.severity === 'powszedni').length;
            const unconfessed = sins.filter(sin => !sin.confessed).length;
            const confessed = sins.filter(sin => sin.confessed).length;
            
            // Statystyki wed≈Çug przykaza≈Ñ
            const commandmentStats = {};
            sins.forEach(sin => {
                commandmentStats[sin.commandment] = (commandmentStats[sin.commandment] || 0) + 1;
            });
            const mostBrokenCommandment = Object.keys(commandmentStats).reduce((a, b) => 
                commandmentStats[a] > commandmentStats[b] ? a : b, '1');
            
            container.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${totalSins}</div>
                    <div class="stat-label">≈ÅƒÖcznie grzech√≥w</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${seriousSins}</div>
                    <div class="stat-label">Grzechy ciƒô≈ºkie</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${venialSins}</div>
                    <div class="stat-label">Grzechy powszednie</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${unconfessed}</div>
                    <div class="stat-label">Niewyspowiadane</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${confessed}</div>
                    <div class="stat-label">Wyspowiadane</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${mostBrokenCommandment}.</div>
                    <div class="stat-label">Najczƒô≈õciej ≈Çamane przykazanie</div>
                </div>
            `;
        }

        // Generowanie listy do spowiedzi
        function generateConfession() {
            const period = document.getElementById('confession-period').value;
            const container = document.getElementById('confession-list');
            
            let filteredSins = sins.filter(sin => !sin.confessed);
            
            if (period !== 'all') {
                const days = parseInt(period);
                const cutoffDate = new Date();
                cutoffDate.setDate(cutoffDate.getDate() - days);
                
                filteredSins = filteredSins.filter(sin => {
                    const sinDate = new Date(sin.date);
                    return sinDate >= cutoffDate;
                });
            }
            
            if (filteredSins.length === 0) {
                container.innerHTML = '<div class="confession-list"><p>Brak grzech√≥w do wyspowiadania w wybranym okresie! üéâ</p></div>';
                return;
            }
            
            // Sortuj po ciƒô≈ºko≈õci i dacie
            filteredSins.sort((a, b) => {
                if (a.severity === 'ciƒô≈ºki' && b.severity === 'powszedni') return -1;
                if (a.severity === 'powszedni' && b.severity === 'ciƒô≈ºki') return 1;
                return new Date(b.date) - new Date(a.date);
            });
            
            let html = '<div class="confession-list">';
            html += '<h4>üìã Lista do spowiedzi</h4>';
            html += '<p><em>Grzechy ciƒô≈ºkie sƒÖ pokazane jako pierwsze:</em></p>';
            
            filteredSins.forEach((sin, index) => {
                const severityIcon = sin.severity === 'ciƒô≈ºki' ? 'üî¥' : 'üü°';
                const commandmentName = commandmentNames[sin.commandment] || `${sin.commandment}. Przykazanie`;
                
                html += `
                    <div class="confession-item">
                        <strong>${index + 1}. ${severityIcon} ${sin.description}</strong><br>
                        <small>
                            ${commandmentName} ‚Ä¢ ${formatDate(sin.date)}
                            ${sin.cardinal ? ` ‚Ä¢ ${sin.cardinal}` : ''}
                            ${sin.context ? `<br>Okoliczno≈õci: ${sin.context}` : ''}
                        </small>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        // Oznaczanie jako wyspowiadane (z listy do spowiedzi)
        function markAsConfessed() {
            const period = document.getElementById('confession-period').value;
            let filteredSins = sins.filter(sin => !sin.confessed);
            
            if (period !== 'all') {
                const days = parseInt(period);
                const cutoffDate = new Date();
                cutoffDate.setDate(cutoffDate.getDate() - days);
                
                filteredSins = filteredSins.filter(sin => {
                    const sinDate = new Date(sin.date);
                    return sinDate >= cutoffDate;
                });
            }
            
            if (filteredSins.length === 0) {
                alert('Brak grzech√≥w do oznaczenia jako wyspowiadane!');
                return;
            }
            
            if (confirm(`Czy na pewno chcesz oznaczyƒá ${filteredSins.length} grzech√≥w jako wyspowiadane?`)) {
                filteredSins.forEach(sin => {
                    const sinIndex = sins.findIndex(s => s.id === sin.id);
                    if (sinIndex !== -1) {
                        sins[sinIndex].confessed = true;
                    }
                });
                
                localStorage.setItem('sins', JSON.stringify(sins));
                updateDisplay();
                generateConfession(); // Od≈õwie≈º listƒô
                alert('Grzechy oznaczone jako wyspowiadane! üôè');
            }
        }

        // Backup functions
        function updateDataInfo() {
            const totalSins = sins.length;
            const unconfessed = sins.filter(sin => !sin.confessed).length;
            
            document.getElementById('data-info').innerHTML = `
                <strong>≈ÅƒÖcznie grzech√≥w:</strong> ${totalSins}<br>
                <strong>Niewyspowiadanych:</strong> ${unconfessed}
            `;
        }

        function exportData() {
            try {
                const data = {
                    sins: sins,
                    exportDate: new Date().toISOString(),
                    version: '1.0'
                };
                
                const jsonData = JSON.stringify(data, null, 2);
                const blob = new Blob([jsonData], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `backup-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showSuccess('Backup pobrany!');
            } catch (error) {
                showError('B≈ÇƒÖd eksportu: ' + error.message);
            }
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (!data.sins || !Array.isArray(data.sins)) {
                        throw new Error('Nieprawid≈Çowy format pliku');
                    }
                    
                    if (confirm(`Przywr√≥ciƒá ${data.sins.length} grzech√≥w?\nObecne dane zostanƒÖ zastƒÖpione!`)) {
                        sins = data.sins;
                        localStorage.setItem('sins', JSON.stringify(sins));
                        updateDisplay();
                        updateDataInfo();
                        showSuccess(`Przywr√≥cono ${data.sins.length} grzech√≥w!`);
                    }
                } catch (error) {
                    showError('B≈ÇƒÖd importu: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        function exportForConfession() {
            const unconfessedSins = sins.filter(sin => !sin.confessed);
            
            if (unconfessedSins.length === 0) {
                alert('Brak grzech√≥w do wyspowiadania!');
                return;
            }
            
            let text = 'LISTA DO SPOWIEDZI\n';
            text += '==================\n\n';
            text += `Data wygenerowania: ${new Date().toLocaleDateString('pl-PL')}\n`;
            text += `≈ÅƒÖcznie grzech√≥w: ${unconfessedSins.length}\n\n`;
            
            // Sortuj po ciƒô≈ºko≈õci
            const sortedSins = unconfessedSins.sort((a, b) => {
                if (a.severity === 'ciƒô≈ºki' && b.severity === 'powszedni') return -1;
                if (a.severity === 'powszedni' && b.severity === 'ciƒô≈ºki') return 1;
                return new Date(b.date) - new Date(a.date);
            });
            
            sortedSins.forEach((sin, index) => {
                const severityText = sin.severity === 'ciƒô≈ºki' ? 'CIƒò≈ªKI' : 'powszedni';
                const commandmentName = commandmentNames[sin.commandment] || `${sin.commandment}. Przykazanie`;
                
                text += `${index + 1}. [${severityText}] ${sin.description}\n`;
                text += `   ${commandmentName} - ${formatDate(sin.date)}\n`;
                if (sin.cardinal) text += `   Grzech g≈Ç√≥wny: ${sin.cardinal}\n`;
                if (sin.context) text += `   Okoliczno≈õci: ${sin.context}\n`;
                text += '\n';
            });
            
            const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `lista-do-spowiedzi-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccess('Lista do spowiedzi pobrana!');
        }

        function clearConfirmation() {
            const confirmation = prompt('Wpisz "USU≈É WSZYSTKO" ≈ºeby potwierdziƒá:');
            if (confirmation === 'USU≈É WSZYSTKO') {
                sins = [];
                localStorage.removeItem('sins');
                updateDisplay();
                updateDataInfo();
                showSuccess('Wszystkie dane usuniƒôte!');
            }
        }

        function showSuccess(message) {
            document.getElementById('success-message').textContent = message;
            document.getElementById('backup-success').style.display = 'block';
            setTimeout(() => {
                document.getElementById('backup-success').style.display = 'none';
            }, 3000);
        }

        function showError(message) {
            document.getElementById('error-message').textContent = message;
            document.getElementById('backup-error').style.display = 'block';
            setTimeout(() => {
                document.getElementById('backup-error').style.display = 'none';
            }, 3000);
        }

        function updateDisplay() {
            updateStatistics();
            updateSinsList();
            updateDataInfo();
        }
    </script>
</body>
</html>